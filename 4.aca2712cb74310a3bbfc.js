(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Uqoo:function(e,t,n){"use strict";n.r(t),n.d(t,"UserTableModule",function(){return Q});var r=n("tyNb"),i=n("XNiG"),o=n("lJxs"),s=n("vkgz"),a=n("C3+9"),c=n("fXoL"),b=n("IzEk"),l=n("nYR2"),u=n("6jB4"),h=n("w58k");let g=(()=>{class e{constructor(e,t){this.usersStore=e,this.api=t}get(){return this.usersStore.setLoading(!0),this.api.getUsers().pipe(Object(b.a)(1),Object(s.a)(e=>this.usersStore.set(e)),Object(l.a)(()=>this.usersStore.setLoading(!1)))}add(e){this.usersStore.add(e)}update(e,t){this.usersStore.update(e,t)}remove(e){this.usersStore.remove(e)}}return e.\u0275fac=function(t){return new(t||e)(c.Vb(u.a),c.Vb(h.a))},e.\u0275prov=c.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=n("1iEP"),d=n("PTRe"),f=n("C2AL"),m=n("3Pt+"),y=n("OzZK"),z=n("RwU8"),C=n("rMZv"),v=n("FwiY"),w=n("ofXK"),F=n("Nqz0");function O(e,t){1&e&&c.Mb(0,"i",10)}function M(e,t){if(1&e&&(c.Pb(0),c.Mb(1,"div",24),c.Mb(2,"div",25),c.Ob()),2&e){const e=t.ngIf;c.Bb(1),c.rc("width: ",e[0],"%"),c.Bb(1),c.rc("width: ",100-e[1],"%")}}function P(e,t){if(1&e&&(c.Rb(0,"tr"),c.Rb(1,"td"),c.wc(2),c.Qb(),c.Rb(3,"td"),c.wc(4),c.Qb(),c.Rb(5,"td"),c.wc(6),c.Qb(),c.Rb(7,"td"),c.Rb(8,"div",21),c.Mb(9,"div",22),c.uc(10,M,3,6,"ng-container",23),c.dc(11,"async"),c.Qb(),c.Qb(),c.Qb()),2&e){const e=t.$implicit,n=c.cc();c.Db("filtered",e.filtered),c.Bb(2),c.xc(e.name),c.Bb(2),c.xc(e.email),c.Bb(2),c.xc(e.state),c.Bb(3),c.rc("width: ",100*e.progress,"%"),c.Bb(1),c.ic("ngIf",c.ec(11,9,n.progressFilterValue$))}}const S=[{path:"",component:(()=>{class e{constructor(e,t,n){this.userService=e,this.inMemoryApiService=t,this.query=n,this.visible=!1,this.loading$=this.query.isLoadingTable(),this.listOfData$=this.query.getFilteredUsersWithProgress(),this.initialStateFilter=this.query.getStateFiltersAsObject(),this.filterState=a.b.map(e=>Object.assign(Object.assign({},e),{byDefault:!!this.initialStateFilter[e.value]})),this.overallFilterControl=this.query.searchFilterControl(),this.overallFilterSubs=this.overallFilterControl.valueChanges.subscribe(e=>this.query.updateSearchFilter(e.trim())),this.searchByNameControl=this.query.searchByNameControl(),this.progressFilterValue$=this.query.userFilters.selectFilters().pipe(Object(o.a)(e=>this.query.getProgressFilterValue())),this.searchAction$=new i.a,this.searchSub=this.searchAction$.pipe(Object(s.a)(e=>this.visible=!1)).subscribe(e=>this.query.updateSearchNameFilter(e)),this.reload()}onQueryParamsChange(e){e.filter&&e.filter.forEach(e=>{"state"===e.key&&this.query.updateStateFilter(new Set(e.value))})}reload(){this.userService.get().subscribe()}regenerate(){this.inMemoryApiService.generateUserTrigger.next()}identityFn(e,t){return t.id}ngOnDestroy(){this.searchSub.unsubscribe(),this.overallFilterSubs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(g),c.Lb(h.a),c.Lb(p.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-user-table"]],decls:36,vars:16,consts:[[1,"filter"],[3,"nzSuffix"],["type","text","nz-input","","placeholder","Input search text",3,"formControl"],["suffixIconSearch",""],["nz-button","","nzType","default",3,"click"],["nz-button","","nzType","default","nzDanger","",3,"click"],["nzTableLayout","fixed",3,"nzLoading","nzData","nzQueryParams"],["filterTable",""],["nzCustomFilter","","nzColumnKey","name"],[3,"nzVisible","nzActive","nzDropdownMenu","nzVisibleChange"],["nz-icon","","nzType","search"],["nzColumnKey","email"],["nzColumnKey","state",3,"nzFilters","nzFilterFn"],["nzColumnKey","progress"],[3,"filtered",4,"ngFor","ngForOf","ngForTrackBy"],["menu","nzDropdownMenu"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","Search name",3,"formControl"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],[1,"progress-outer"],[1,"progress-inner"],[4,"ngIf"],[1,"progress-limit-min"],[1,"progress-limit-max"]],template:function(e,t){if(1&e&&(c.Rb(0,"div",0),c.Rb(1,"nz-input-group",1),c.Mb(2,"input",2),c.Qb(),c.uc(3,O,1,0,"ng-template",null,3,c.vc),c.Qb(),c.Rb(5,"button",4),c.Zb("click",function(){return t.reload()}),c.wc(6,"Reload"),c.Qb(),c.Rb(7,"button",5),c.Zb("click",function(){return t.regenerate()}),c.wc(8,"Generate new users"),c.Qb(),c.Rb(9,"nz-table",6,7),c.Zb("nzQueryParams",function(e){return t.onQueryParamsChange(e)}),c.dc(11,"async"),c.dc(12,"async"),c.Rb(13,"thead"),c.Rb(14,"tr"),c.Rb(15,"th",8),c.wc(16," Name "),c.Rb(17,"nz-filter-trigger",9),c.Zb("nzVisibleChange",function(e){return t.visible=e}),c.Mb(18,"i",10),c.Qb(),c.Qb(),c.Rb(19,"th",11),c.wc(20,"Email"),c.Qb(),c.Rb(21,"th",12),c.wc(22,"Gender"),c.Qb(),c.Rb(23,"th",13),c.wc(24," Progress "),c.Qb(),c.Qb(),c.Qb(),c.Rb(25,"tbody"),c.uc(26,P,12,11,"tr",14),c.Qb(),c.Qb(),c.Rb(27,"nz-dropdown-menu",null,15),c.Rb(29,"div",16),c.Rb(30,"div",17),c.Mb(31,"input",18),c.Rb(32,"button",19),c.Zb("click",function(){return t.searchAction$.next(t.searchByNameControl.value)}),c.wc(33," Search "),c.Qb(),c.Rb(34,"button",20),c.Zb("click",function(){return t.searchAction$.next("")}),c.wc(35,"Reset"),c.Qb(),c.Qb(),c.Qb(),c.Qb()),2&e){const e=c.mc(4),n=c.mc(10),r=c.mc(28);c.Bb(1),c.ic("nzSuffix",e),c.Bb(1),c.ic("formControl",t.overallFilterControl),c.Bb(7),c.ic("nzLoading",c.ec(11,12,t.loading$))("nzData",c.ec(12,14,t.listOfData$)),c.Bb(8),c.ic("nzVisible",t.visible)("nzActive",t.searchByNameControl.value.length>0)("nzDropdownMenu",r),c.Bb(4),c.ic("nzFilters",t.filterState)("nzFilterFn",!0),c.Bb(5),c.ic("ngForOf",n.data)("ngForTrackBy",t.identityFn),c.Bb(5),c.ic("formControl",t.searchByNameControl)}},directives:[d.b,f.a,d.c,d.a,m.c,m.i,m.e,y.a,z.a,C.c,C.h,C.i,C.b,C.g,C.f,C.a,v.b,C.e,w.k,F.c,w.l],pipes:[w.b],styles:[".search-box[_ngcontent-%COMP%]{padding:8px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:188px;margin-bottom:8px;display:block}.search-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px}.search-button[_ngcontent-%COMP%]{margin-right:8px}.progress-outer[_ngcontent-%COMP%]{background-color:#ccc;height:20px;border-radius:2px;position:relative}.progress-outer[_ngcontent-%COMP%]   .progress-inner[_ngcontent-%COMP%]{transition:width .2s;background-color:#aaa;height:100%}.progress-outer[_ngcontent-%COMP%]   .progress-limit-max[_ngcontent-%COMP%], .progress-outer[_ngcontent-%COMP%]   .progress-limit-min[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;background-color:rgba(255,0,0,.1)}.progress-outer[_ngcontent-%COMP%]   .progress-limit-max[_ngcontent-%COMP%]{right:0}.progress-outer[_ngcontent-%COMP%]   .progress-limit.min[_ngcontent-%COMP%]{left:0}.filtered[_ngcontent-%COMP%]{transition:opacity .3s;opacity:.2}.filter[_ngcontent-%COMP%]{margin:0 0 16px}"]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({imports:[[r.e.forChild(S)],r.e]}),e})();var R=n("PCNd");let Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({imports:[[x,R.a]]}),e})()}}]);